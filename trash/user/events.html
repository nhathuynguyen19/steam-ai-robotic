{% extends "base.html" %}
{% block title %}Sự kiện{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Danh sách sự kiện</h2>

  <div class="tabs is-boxed mb-4">
    <ul>
      <li class="is-active" id="tab-ongoing">
        <a hx-get="/events/partial?tab=ongoing" 
           hx-target="#events-table"
           hx-swap="innerHTML"
           onclick="setActiveTab(this)">
           Đang diễn ra
        </a>
      </li>
      <li id="tab-upcoming">
        <a hx-get="/events/partial?tab=upcoming" 
           hx-target="#events-table"
           hx-swap="innerHTML"
           onclick="setActiveTab(this)">
           Chưa diễn ra
        </a>
      </li>
      <li id="tab-finished">
        <a hx-get="/events/partial?tab=finished" 
           hx-target="#events-table"
           hx-swap="innerHTML"
           onclick="setActiveTab(this)">
           Đã hoàn thành
        </a>
      </li>
    </ul>
  </div>

  <div id="events-table"
       hx-get="/events/partial?tab=ongoing"
       hx-trigger="load"
       hx-swap="innerHTML">
       </div>
</div>

<script>
  function setActiveTab(element) {
    // Remove is-active from all lis
    document.querySelectorAll('.tabs li').forEach(li => li.classList.remove('is-active'));
    // Add is-active to parent li of clicked a
    element.parentElement.classList.add('is-active');
  }
</script>

<style>
    /* CSS đơn giản cho Tabs nếu chưa có framework CSS */
    .tabs ul { display: flex; list-style: none; padding: 0; border-bottom: 1px solid #dbdbdb; }
    .tabs li { margin-right: 5px; }
    .tabs li a { padding: 10px 15px; display: block; text-decoration: none; color: #4a4a4a; border: 1px solid transparent; border-bottom: none; cursor: pointer; }
    .tabs li.is-active a { border-color: #dbdbdb; border-bottom-color: white; background: white; color: #3273dc; font-weight: bold; margin-bottom: -1px; }
    
    .tag-finished { background-color: #48c774; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8em; }
    .tag-ongoing { background-color: #3298dc; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8em; }
    .form-inline { display: inline-flex; align-items: center; gap: 5px; }
</style>
{% endblock %}